# Лабораторная работа 5
## Введение

На GitHub создал новый репозиторий с именем practice5. В папке на компьютере сохранил его локальную копию:
```
git clone https://github.com/Alexis416/practice5
cd practice5
```
Далее создаю текстовый файл в папке и добавляю в него текст. Завершаю эту часть, внеся изменения в репозиторий с помощью следующих команд:
```
git add example1.txt
git commit -m "File added example1.txt"
git push origin main
```
Создаём ветку и переключаемся на неё:
```
git branch feature-branch
git checkout feature-branch
```
В новую созданную ветку feature-branch добавим старый файл, в котором будет добавлен ещё текст:
```
git add example1.txt
git commit -m "File added 2 example1.txt"
git push origin feature-branch
```
В завершение, переключимся на основную ветку и сольём изменения из ветки feature-branch в основную ветку:
```
git checkout main
git merge feature-branch
git push origin main
```
Таким образом, изменения были успешно слиты в главную ветку.

P.S.: для работы с протоколом https пришлось устанавливать токен личного доступа, так как при вводе команды 
git push origin main или git push origin feature-branch система просит ввести имя пользователя и пароль, но привычный пароль не вводится, так как эта система была удалена в 2021 году и в качестве аутентификатора можно использовать токен, что я и сделал.

## Работа с ветками
Создаём новый текстовый файл с базовой структурой книги:
```
# Название книги

## Глава 1: Введение
Введение в тему книги.

## Глава 2: Основы Git
Основные понятия и команды Git.
```
Создаю новую ветку и переключаюсь на неё:
```
git checkout -b feature-login
```
Вношу изменения в файл:
```
# Название книги

## Глава 1: Введение
Здесь будет введение в тему книги.

## Глава 2: Основы Git
Основные понятия и команды Git.

## Глава 3: Вход в систему
Раздел по новой функциональности входа в систему.
```
В конце завершаю изменения и отправляю их в ветку на GitHub:
```
git add example2.md
git commit -m "Добавлена глава 3: Вход в систему"
git push origin feature-login
```

## Работа с удаленным репозиторием
Переключаемся на ветку main и там вносим изменения:
```
git checkout main
```
Вносим изменения в нашем файле:
```
# Название книги: Приключения в мире Git

## Глава 1: Введение
Здесь будет введение в удивительный мир Git.

## Глава 2: Основы Git
Основные понятия и команды Git.
```
Закоммитим изменения и отправим всё на GitHub:
```
git add example2.md
git commit -m "Изменено название книги и введение"
git push origin main
```
## Моделирование конфликта
Возвращаемся в ветку "feature-login" и вносим изменения в том же участке:
```
git checkout feature-login
```
Меняем главу 2 в файле:
```
# Название книги: Приключения в мире Git

## Глава 1: Введение
Здесь будет введение в удивительный мир Git.

## Глава 2: Основы Git и магия конфликтов
Основные понятия и команды Git, а также волшебство разрешения конфликтов.
```
Делаем коммит изменений и отправляем на GitHub:
```
git add example2.md
git commit -m "Добавлен раздел о магии конфликтов"
git push origin feature-login
```
## Разрешение конфликта
Вернёмся в основную ветку и попробуем слить изменения:
```
git checkout main
git merge feature-login
```
Возникает конфликт, а в самом файле появляется вот такой текст:

```
# Название книги: Приключения в мире Git

## Глава 1: Введение
Здесь будет введение в удивительный мир Git.

<<<<<<< HEAD
## Глава 2: Основы Git и магия конфликтов
Основные понятия и команды Git, а также волшебство разрешения конфликтов.
======= 
## Глава 2: Основы Git
Основные понятия и команды Git. 
>>>>>>> feature-login
```
В консоли появятся такие сообщения:

![screen1](https://github.com/Alexis416/Informatics/blob/main/Lab-5/1.png)

Разрешаем конфликт, удалив метки и оставив нужные изменения:
```
# Название книги: Приключения в мире Git

## Глава 1: Введение
Здесь будет введение в удивительный мир Git.

## Глава 2: Основы Git и магия конфликтов
Основные понятия и команды Git, а также волшебство разрешения конфликтов.
```
Закоммитим разрешение конфликта и отправляем изменения на GitHub:
```
git add example2.md
git commit -m "Resolved conflict in chapter 2"
git push origin main
```
## Автоматизация проверки файлов при коммите
Поставлена задача: перед каждым коммитом необходимо автоматически проверять, 
чтобы все .txt файлы в репозитории соответствовали определенному формату.

В таком случае пускай сами проверяемые файлы будт книгами в формате .txt, 
а соответствие наших файлов искомым будем проверять поиском подстроки "Введение", так как в каждой книге оно есть.
Поместим скрипт в папку .git/hooks и назовём его pre-commit. 
```
#!/bin/bash
if grep -q "Введение" ex.txt
 then echo "Этот файл - книга"
else
 echo "Этот файл не может быть книгой"
fi
```
